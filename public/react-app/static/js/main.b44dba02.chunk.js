(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{67:function(e,t,a){e.exports=a(93)},74:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(8),l=a.n(o),s=(a(72),a(73),a(74),a(9)),i=a(7),c=a(12),u=a(10),m=a(11),p=a(57),h=a.n(p),d=(a(75),a(20)),f=a(36),b=a(46),E={bookingInfo:{},tickets:[]};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_BOOKING_INFO":return Object(b.a)({},e,{bookingInfo:t.value});case"UPDATE_TICKETS":return Object(b.a)({},e,{tickets:t.value});case"UPDATE_TICKET":var a=e.tickets;return a[t.value.index]=t.value.value,Object(b.a)({},e,{tickets:a});default:return e}},g=Object(f.b)(v),N=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("h2",null,"Step ",this.props.currentStep),n.a.createElement("p",null,"Total Steps: ",this.props.totalSteps),n.a.createElement("p",null,"Is Active: ",this.props.isActive),n.a.createElement("p",null,n.a.createElement("button",{onClick:this.props.previousStep},"Previous Step")),n.a.createElement("p",null,n.a.createElement("button",{onClick:this.props.nextStep},"Next Step")),n.a.createElement("p",null,n.a.createElement("button",{onClick:function(){return e.props.goToStep(2)}},"Step 2")),n.a.createElement("p",null,n.a.createElement("button",{onClick:this.props.firstStep},"First Step")),n.a.createElement("p",null,n.a.createElement("button",{onClick:this.props.lastStep},"Last Step")))}}]),t}(n.a.Component),y=a(59),k=a.n(y),O=a(37),S=a.n(O),C=a(123),j=a(124),w=a(122),T=a(117),D=a(118),P=a(116),x=a(119),_=a(120),M=a(121),B=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement(j.a,{open:this.props.show,onClose:this.props.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(P.a,{id:"alert-dialog-title"},"You must provide all the fields"),n.a.createElement(T.a,null,n.a.createElement(D.a,{id:"alert-dialog-description"},"It looks like you didn't provide all necessary informations belonging to the tickets you want to afford. Please try to fix theses points :"),n.a.createElement(x.a,null,this.props.errors.map(function(e){return n.a.createElement(_.a,{button:!0,key:e},n.a.createElement(M.a,{primary:e}))}))),n.a.createElement(w.a,null,n.a.createElement(C.a,{onClick:this.props.onClose,color:"primary"},"OK")))}}]),t}(n.a.Component),I=(a(90),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onNextStepPress=function(){var e={date:a.state.date,visitorsNumber:a.state.visitorsNumber,ticketType:a.state.ticketType,orderMailing:a.state.orderMailing,orderMailingConfirm:a.state.orderMailingConfirm};a._checkBooking(e)&&(a._registerBookingInfo(e),a._registerTickets(e.visitorsNumber),window.scrollTo(0,0),a.props.nextStep())},a.onErrorsModalClose=function(){a.setState({showErrors:!1})},a._registerBookingInfo=function(e){var t={type:"UPDATE_BOOKING_INFO",value:e};a.props.dispatch(t)},a._registerTickets=function(e){for(var t=[],r=0;r<e;r++)t.push({});var n={type:"UPDATE_TICKETS",value:t};a.props.dispatch(n)},a._checkBooking=function(e){var t=[];return a._ckeckBookingDate(e.date)||t.push("Visit date is invalid"),e.visitorsNumber<=0&&t.push("Visitors number is invalid"),""===e.ticketType&&t.push("Ticket type is invalid"),""!==e.orderMailing&&!1!==a._isEmailValid(e.orderMailing)||t.push("Order email is invalid"),e.orderMailingConfirm!==e.orderMailing&&t.push("You didn't type the same email address"),!(t.length>0)||(a.setState({errors:t,showErrors:!0}),!1)},a._ckeckBookingDate=function(e){return!(0===(e=new Date(e)).getDay()||2===e.getDay()||1===e.getDate()&&4===e.getMonth()||1===e.getDate()&&10===e.getMonth()||25===e.getDate()&&11===e.getMonth()||e<new Date)},a._isEmailValid=function(e){return k.a.validate(e)},a.state={date:new Date,visitorsNumber:0,ticketType:"full",orderMailing:"",orderMailingConfirm:"",showErrors:!1,errors:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"step"},n.a.createElement("h2",null,"Booking"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-control-label required"},"Visit date"),n.a.createElement(S.a,{"data-enable-time":!0,id:"visitDateInput",options:{dateFormat:"d/m/Y",enableTime:!1,disable:[function(e){return 0===e.getDay()||2===e.getDay()||1===e.getDate()&&4===e.getMonth()||1===e.getDate()&&10===e.getMonth()||25===e.getDate()&&11===e.getMonth()||e<new Date}]},className:"form-control",value:this.state.date,onChange:function(t){e.setState({date:t})}}),n.a.createElement("small",{className:"form-text text-muted"},"Booking not available on sundays. Closed on Tuesdays, the 1st of May, the 1st of November et le 25th of December.")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-control-label required"},"Number of visitors"),n.a.createElement("input",{type:"number",className:"form-control",value:this.state.visitorsNumber,onChange:function(t){e.setState({visitorsNumber:t.target.value})}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-control-label required"},"Ticket type"),n.a.createElement("select",{className:"form-control",value:this.state.ticketType,onChange:function(t){return e.setState({ticketType:t.target.value})}},n.a.createElement("option",{value:"full"},"Full Day"),n.a.createElement("option",{value:"half"},"Half-Day")),n.a.createElement("small",{className:"form-text text-muted"},'The "Half-Day" ticket is only valid from 14h.')),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-control-label required"},"Mailing address of receipt for the ticket(s)"),n.a.createElement("input",{type:"email",className:"form-control",required:!0,onChange:function(t){return e.setState({orderMailing:t.target.value})}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-control-label required"},"Confirm the email address"),n.a.createElement("input",{type:"email",className:"form-control",required:!0,onChange:function(t){return e.setState({orderMailingConfirm:t.target.value})}})),n.a.createElement("div",{className:"form-group nav-line-right"},n.a.createElement("button",{className:"btn btn-primary",onClick:this.onNextStepPress},"Next")),n.a.createElement(B,{show:this.state.showErrors,onClose:this.onErrorsModalClose,errors:this.state.errors}))}}]),t}(n.a.Component)),F=Object(d.b)(function(e){return e})(I),L=a(45),q=a(50),A=a.n(q),Y=a(62),K=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onFormChanged=function(){var e=Object(Y.a)(A.a.mark(function e(t,r){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="firstName"===e.t0?3:"lastName"===e.t0?5:"birthDate"===e.t0?7:"country"===e.t0?9:"reduction"===e.t0?11:13;break;case 3:return a.setState({firstName:r},function(){a._updateStore()}),e.abrupt("break",14);case 5:return a.setState({lastName:r},function(){a._updateStore()}),e.abrupt("break",14);case 7:return a.setState({birthDate:r},function(){a._updateStore()}),e.abrupt("break",14);case 9:return a.setState({country:r},function(){a._updateStore()}),e.abrupt("break",14);case 11:return a.setState({reduction:!a.state.reduction},function(){a._updateStore()}),e.abrupt("break",14);case 13:return e.abrupt("return");case 14:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a._updateStore=function(){var e={type:"UPDATE_TICKET",value:{index:a.props.index,value:a.state}};a.props.dispatch(e)},a.state={firstName:"",lastName:"",birthDate:new Date,country:"",reduction:!0},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"contained"},n.a.createElement("h5",null,"Beneficiary #",this.props.beneficiaryNumber),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-control-label required"},"First name"),n.a.createElement("input",{type:"text",maxLength:"35",className:"form-control",value:this.state.firstName,onChange:function(t){return e.onFormChanged("firstName",t.target.value)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-control-label required"},"Last Name"),n.a.createElement("input",{type:"text",maxLength:"35",className:"form-control",value:this.state.lastName,onChange:function(t){return e.onFormChanged("lastName",t.target.value)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-control-label required"},"Birth date"),n.a.createElement(S.a,{"data-enable-time":!0,id:"birthDateInput",options:{dateFormat:"d/m/Y"},className:"form-control",value:this.state.birthDate,onChange:function(t){return e.onFormChanged("birthDate",t)}}),n.a.createElement("small",{className:"form-text text-muted"},"We'll never share your informations to thirds.")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"form-control-label required"},"Country"),n.a.createElement("input",{type:"text",maxLength:"35",className:"form-control",value:this.state.country,onChange:function(t){return e.onFormChanged("country",t.target.value)}})),n.a.createElement("div",{className:"form-group"},n.a.createElement("div",{className:"form-check"},n.a.createElement("input",{type:"checkbox",className:"form-check-input",checked:this.state.reduction,onChange:function(t){return e.onFormChanged("reduction",t.target.value)}}),n.a.createElement("label",{className:"form-check-label"},"Reduction")),n.a.createElement("small",{className:"form-text text-muted"},"Upon presentation of justificative at the museum entrance")))}}]),t}(n.a.Component),U=Object(d.b)(function(e){return e})(K),V=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onGoToPreviousStepPress=function(e){e.preventDefault(),a.props.goToPrevious()},a.state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log(this.props),n.a.createElement("div",{className:"contained"},n.a.createElement("h4",null,"Oops!"),n.a.createElement("p",null,"You have no beneficiary. Why not start by the beginning ?"),n.a.createElement("p",null,n.a.createElement("a",{href:"#step2",onClick:this.onGoToPreviousStepPress},"Go to the first step")))}}]),t}(n.a.Component),G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onNextStepPress=function(){a._checkTicketsData()&&(window.scrollTo(0,0),a.props.nextStep())},a.onPreviousStepPress=function(){window.scrollTo(0,0),a.props.previousStep()},a.onModalClose=function(){a.setState({showErrors:!1})},a._checkTicketsData=function(){console.log(a.props);var e=a.props.tickets,t=a.props.bookingInfo,r=[];e.length!==parseInt(t.visitorsNumber,10)&&(console.log(e.length),console.log(t.visitorsNumber),r.push("You have "+t.visitorsNumber+" visitors but you only provided "+e.length+" tickets"));for(var n=0;n<e.length;n++){var o=e[n];o.firstName&&""!==o.firstName||r.push("Beneficiary #"+(n+1)+": Each visitor must have a first name"),o.lastName&&""!==o.lastName||r.push("Beneficiary #"+(n+1)+": Each visitor must have a last name"),o.birthDate||r.push("Beneficiary #"+(n+1)+": Each visitor must have a birth date"),o.country&&""!==o.country||r.push("Beneficiary #"+(n+1)+": Each visitor must have a country"),void 0===o.reduction&&r.push("Beneficiary #"+(n+1)+": For each visitor, please tell us if they are eligible for reduced price.")}return!(r.length>0)||(console.log("triggered"),console.log(r),a.setState({errors:r,showErrors:!0}),!1)},a.state={birthDate:new Date,showErrors:!1,errors:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.bookingInfo.visitorsNumber?parseInt(this.props.bookingInfo.visitorsNumber,10):0;return console.log(e),n.a.createElement("div",{className:"step"},n.a.createElement("h2",null,e&&e>1?"Beneficiaries":"Beneficiary"),e>0?Object(L.a)(Array(e)).map(function(e,t){return n.a.createElement(U,{key:t,beneficiaryNumber:t+1,index:t})}):n.a.createElement(V,{goToPrevious:this.props.previousStep}),n.a.createElement("div",{className:"form-group nav-line"},n.a.createElement("button",{className:"btn btn-secondary",onClick:this.onPreviousStepPress},"Previous"),n.a.createElement("button",{className:"btn btn-primary",onClick:this.onNextStepPress},"Recap")),n.a.createElement(B,{show:this.state.showErrors,onClose:this.onModalClose,errors:this.state.errors}))}}]),t}(n.a.Component),H=Object(d.b)(function(e){return e})(G),R=a(43),W=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onPreviousStepPress=function(){window.scrollTo(0,0),a.props.previousStep()},a.onNextStepPress=function(){a.setState({isLoading:!0}),setTimeout(function(){a.setState({isLoading:!1}),window.scrollTo(0,0),a.props.nextStep()},500)},a.state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"step"},n.a.createElement("h2",{className:"step-title"},"Recap"),n.a.createElement("p",null,"You will find here all the recap of your order. Please be sure everything is ok before paying."),n.a.createElement("div",{className:"contained"},n.a.createElement("table",{className:"table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"#"),n.a.createElement("th",{scope:"col"},"First Name"),n.a.createElement("th",{scope:"col"},"Last Name"),n.a.createElement("th",{scope:"col"},"Ticket type"),n.a.createElement("th",{scope:"col"},"Reduced Price"),n.a.createElement("th",{scope:"col"},"Cost"))),n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"1"),n.a.createElement("td",null,"Mark"),n.a.createElement("td",null,"Otto"),n.a.createElement("td",null,"Half-day"),n.a.createElement("td",null,"Yes"),n.a.createElement("td",null,"10\u20ac")),n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"2"),n.a.createElement("td",null,"Jacob"),n.a.createElement("td",null,"Thornton"),n.a.createElement("td",null,"@fat")),n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"3"),n.a.createElement("td",null,"Larry"),n.a.createElement("td",null,"the Bird"),n.a.createElement("td",null,"@twitter")))),n.a.createElement("table",{className:"table"},n.a.createElement("thead",{className:"thead-light"},n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Number of tickets"),n.a.createElement("th",{scope:"col"},"Total Price (VAT included)"))),n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"4"),n.a.createElement("td",null,"133\u20ac"))))),n.a.createElement("div",{className:"form-group nav-line"},n.a.createElement("button",{className:"btn btn-secondary",onClick:this.onPreviousStepPress},"Previous"),n.a.createElement("button",{className:"btn btn-primary",onClick:this.onNextStepPress},this.state.isLoading?n.a.createElement(R.Dots,{color:"white"}):"Order")))}}]),t}(n.a.Component),J=Object(d.b)(function(e){return e})(W),$=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onPreviousStepPress=function(){window.scrollTo(0,0),a.props.previousStep()},a.onNextStepPress=function(){window.scrollTo(0,0),a.props.nextStep()},a.state={isLoading:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"step"},n.a.createElement("h2",{className:"step-title"},"Payment"),n.a.createElement("div",{className:"alert alert-info",role:"alert"},"You are about to pay an amount of ",n.a.createElement("b",null,"250\u20ac")),n.a.createElement("div",{className:"contained"}),n.a.createElement("div",{className:"form-group nav-line"},n.a.createElement("button",{className:"btn btn-secondary",onClick:this.onPreviousStepPress},"Previous"),n.a.createElement("button",{className:"btn btn-primary",onClick:this.onNextStepPress},this.state.isLoading?n.a.createElement(R.Dots,{color:"white"}):"Pay")))}}]),t}(n.a.Component),z=(a(92),function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement(d.a,{store:g},n.a.createElement("div",{className:"App"},n.a.createElement(h.a,{className:"contained",isHashEnabled:!0},n.a.createElement(F,null),n.a.createElement(H,null),n.a.createElement(J,null),n.a.createElement($,null),n.a.createElement(N,null))))}}]),t}(n.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[67,1,2]]]);
//# sourceMappingURL=main.b44dba02.chunk.js.map